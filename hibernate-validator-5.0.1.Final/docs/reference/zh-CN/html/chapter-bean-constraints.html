<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory">第 2 章 Declaring and validating bean constraints</title><link rel="stylesheet" href="css/hibernate.css" type="text/css"/><meta xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" name="generator" content="DocBook XSL Stylesheets V1.74.0"/><link rel="home" href="index.html" title="Hibernate Validator"/><link rel="up" href="index.html" title="Hibernate Validator"/><link rel="prev" href="validator-gettingstarted.html" title="第 1 章 Getting started"/><link rel="next" href="chapter-method-constraints.html" title="第 3 章 Declaring and validating method constraints"/></head><body><p id="title"><a href="http://www.hibernate.org" class="site_href"><strong>Hibernate.org</strong></a><a href="http://hibernate.org/Documentation/DocumentationOverview" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="validator-gettingstarted.html"><strong>上一页</strong></a></li><li class="next"><a accesskey="n" href="chapter-method-constraints.html"><strong>下一页</strong></a></li></ul><div class="chapter" lang="zh-CN"><div class="titlepage"><div><div><h2 class="title"><a id="chapter-bean-constraints"/>第 2 章 Declaring and validating bean constraints</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="chapter-bean-constraints.html#section-declaring-bean-constraints">2.1. Declaring bean constraints</a></span></dt><dd><dl><dt><span class="section"><a href="chapter-bean-constraints.html#d0e328">2.1.1. Field-level constraints</a></span></dt><dt><span class="section"><a href="chapter-bean-constraints.html#d0e347">2.1.2. Property-level constraints</a></span></dt><dt><span class="section"><a href="chapter-bean-constraints.html#d0e378">2.1.3. Class-level constraints</a></span></dt><dt><span class="section"><a href="chapter-bean-constraints.html#section-constraint-inheritance">2.1.4. Constraint inheritance</a></span></dt><dt><span class="section"><a href="chapter-bean-constraints.html#section-object-graph-validation">2.1.5. Object graphs</a></span></dt></dl></dd><dt><span class="section"><a href="chapter-bean-constraints.html#section-validating-bean-constraints">2.2. Validating bean constraints</a></span></dt><dd><dl><dt><span class="section"><a href="chapter-bean-constraints.html#section-obtaining-validator">2.2.1. Obtaining a Validator instance</a></span></dt><dt><span class="section"><a href="chapter-bean-constraints.html#d0e622">2.2.2. Validator methods</a></span></dt><dt><span class="section"><a href="chapter-bean-constraints.html#section-constraint-violation-methods">2.2.3. ConstraintViolation methods</a></span></dt></dl></dd><dt><span class="section"><a href="chapter-bean-constraints.html#section-builtin-constraints">2.3. Built-in constraints</a></span></dt><dd><dl><dt><span class="section"><a href="chapter-bean-constraints.html#validator-defineconstraints-spec">2.3.1. Bean Validation constraints</a></span></dt><dt><span class="section"><a href="chapter-bean-constraints.html#validator-defineconstraints-hv-constraints">2.3.2. Additional constraints</a></span></dt></dl></dd></dl></div><p>In this chapter you will learn how to declare (see <a class="xref" href="chapter-bean-constraints.html#section-declaring-bean-constraints" title="2.1. Declaring bean constraints">第 2.1 节 “Declaring bean constraints”</a>) and validate (see <a class="xref" href="chapter-bean-constraints.html#section-validating-bean-constraints" title="2.2. Validating bean constraints">第 2.2 节 “Validating bean constraints”</a>) bean constraints. <a class="xref" href="chapter-bean-constraints.html#section-builtin-constraints" title="2.3. Built-in constraints">第 2.3 节 “Built-in constraints”</a> provides an overview of all built-in constraints coming with Hibernate Validator.</p><p>If you are interested in applying constraints to method parameters and return values, refer to <a class="xref" href="chapter-method-constraints.html" title="第 3 章 Declaring and validating method constraints">第 3 章 <i>Declaring and validating method constraints</i></a>.</p><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h2 class="title"><a id="section-declaring-bean-constraints"/>2.1. Declaring bean constraints</h2></div></div></div><p>Constraints in Bean Validation are expressed via Java annotations. In this section you will learn how to enhance an object model with these annotations. There are the following three types of bean constraints:</p><div class="itemizedlist"><ul><li><p>field constraints</p></li><li><p>property constraints</p></li><li><p>class constraints</p></li></ul></div><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>注意</h2><p>Not all constraints can be placed on all of these levels. In fact, none of the default constraints defined by Bean Validation can be placed at class level. The <code class="classname">java.lang.annotation.Target</code> annotation in the constraint annotation itself determines on which elements a constraint can be placed. See <a class="xref" href="validator-customconstraints.html" title="第 6 章 Creating custom constraints">第 6 章 <i>Creating custom constraints</i></a> for more information.</p></div><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h3 class="title"><a id="d0e328"/>2.1.1. Field-level constraints</h3></div></div></div><p>Constraints can be expressed by annotating a field of a class. <a class="xref" href="chapter-bean-constraints.html#example-field-level" title="例 2.1. Field-level constraints">例 2.1 “Field-level constraints”</a> shows a field level configuration example:</p><div class="example"><a id="example-field-level"/><p class="title"><b>例 2.1. Field-level constraints</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">hibernate</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">validator</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">referenceguide</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">chapter02</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">fieldlevel</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Car</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;manufacturer</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AssertTrue</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isRegistered</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Car</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;manufacturer</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isRegistered</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">manufacturer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;manufacturer</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">isRegistered&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;isRegistered</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_plain">getters&nbsp;and&nbsp;setters</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/><p>When using field-level constraints field access strategy is used to access the value to be validated. This means the validation engine directly accesses the instance variable and does not invoke the property accessor method even if such an accessor exists.</p><p>Constraints can be applied to fields of any access type (public, private etc.). Constraints on static fields are not supported, though.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="tip"><h2>提示</h2><p>When validating byte code enhanced objects property level constraints should be used, because the byte code enhancing library won't be able to determine a field access via reflection.</p></div></div><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h3 class="title"><a id="d0e347"/>2.1.2. Property-level constraints</h3></div></div></div><p>If your model class adheres to the <a class="ulink" href="http://java.sun.com/javase/technologies/desktop/javabeans/index.jsp">JavaBeans</a> standard, it is also possible to annotate the properties of a bean class instead of its fields. <a class="xref" href="chapter-bean-constraints.html#example-property-level" title="例 2.2. Property-level constraints">例 2.2 “Property-level constraints”</a> uses the same entity as in <a class="xref" href="chapter-bean-constraints.html#example-field-level" title="例 2.1. Field-level constraints">例 2.1 “Field-level constraints”</a>, however, property level constraints are used.</p><div class="example"><a id="example-property-level"/><p class="title"><b>例 2.2. Property-level constraints</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">hibernate</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">validator</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">referenceguide</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">chapter02</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">propertylevel</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Car</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;manufacturer</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isRegistered</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">Car</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;manufacturer</span><span class="java_separator">,</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isRegistered</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">manufacturer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;manufacturer</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">isRegistered&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;isRegistered</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getManufacturer</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;manufacturer</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setManufacturer</span><span class="java_separator">(</span><span class="java_type">String</span><span class="java_plain">&nbsp;manufacturer</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">manufacturer&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;manufacturer</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">AssertTrue</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isRegistered</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;isRegistered</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">void</span><span class="java_plain">&nbsp;setRegistered</span><span class="java_separator">(</span><span class="java_type">boolean</span><span class="java_plain">&nbsp;isRegistered</span><span class="java_separator">)</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">this</span><span class="java_separator">.</span><span class="java_plain">isRegistered&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;isRegistered</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>注意</h2><p>The property's getter method has to be annotated, not its setter. That way also read-only properties can be constrained which have no setter method.</p></div><p>When using property level constraints property access strategy is used to access the value to be validated, i.e. the validation engine accesses the state via the property accessor method.</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="tip"><h2>提示</h2><p>It is recommended to stick either to field <span class="emphasis"><em>or</em></span> property annotations within one class. It is not recommended to annotate a field <span class="emphasis"><em>and</em></span> the accompanying getter method as this would cause the field to be validated twice.</p></div></div><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h3 class="title"><a id="d0e378"/>2.1.3. Class-level constraints</h3></div></div></div><p>Last but not least, a constraint can also be placed on the class level. In this case not a single property is subject of the validation but the complete object. Class-level constraints are useful if the validation depends on a correlation between several properties of an object.</p><p>The <code class="classname">Car</code> class in <a class="xref" href="chapter-bean-constraints.html#example-class-level" title="例 2.3. Class-level constraint">例 2.3 “Class-level constraint”</a> has the two attributes <code class="varname">seatCount</code> and <code class="varname">passengers</code> and it should be ensured that the list of passengers has not more entries than seats are available. For that purpose the <code class="classname">@ValidPassengerCount</code> constraint is added on the class level. The validator of that constraint has access to the complete <code class="classname">Car</code> object, allowing to compare the numbers of seats and passengers.</p><p>Refer to <a class="xref" href="validator-customconstraints.html#section-class-level-constraints" title="6.2. Class-level constraints">第 6.2 节 “Class-level constraints”</a> to learn in detail how to implement this custom constraint.</p><div class="example"><a id="example-class-level"/><p class="title"><b>例 2.3. Class-level constraint</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">hibernate</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">validator</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">referenceguide</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">chapter02</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">classlevel</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">@</span><span class="java_type">ValidPassengerCount</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Car</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">int</span><span class="java_plain">&nbsp;seatCount</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Person</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;passengers</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/></div><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h3 class="title"><a id="section-constraint-inheritance"/>2.1.4. Constraint inheritance</h3></div></div></div><p>When a class implements an interface or extends another class, all constraint annotations declared on the supertype apply in the same manner as the constraints specified on the class itself. To make things clearer let's have a look at the following example:</p><div class="example"><a id="d0e416"/><p class="title"><b>例 2.4. Constraint inheritance</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">hibernate</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">validator</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">referenceguide</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">chapter02</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">inheritance</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Car</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;manufacturer</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getManufacturer</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;manufacturer</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">hibernate</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">validator</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">referenceguide</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">chapter02</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">inheritance</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">RentalCar</span><span class="java_plain">&nbsp;</span><span class="java_keyword">extends</span><span class="java_plain">&nbsp;</span><span class="java_type">Car</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;rentalStation</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;getRentalStation</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">return</span><span class="java_plain">&nbsp;rentalStation</span><span class="java_separator">;</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_separator">}</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/><p>Here the class <code class="classname">RentalCar</code> is a subclass of <code class="classname">Car</code> and adds the property <span class="property">rentalStation</span>. If an instance of <code class="classname">RentalCar</code> is validated, not only the <code class="classname">@NotNull</code> constraint on <span class="property">rentalStation</span> is evaluated, but also the constraint on <span class="property">manufacturer</span> from the parent class.</p><p>The same would be true, if <code class="classname">Car</code> was not a superclass but an interface implemented by <code class="classname">RentalCar</code>.</p><p>Constraint annotations are aggregated if methods are overridden. So if <code class="classname">RentalCar</code> overrode the <code class="methodname">getManufacturer()</code> method from <code class="classname">Car</code>, any constraints annotated at the overriding method would be evaluated in addition to the <code class="classname">@NotNull</code> constraint from the superclass.</p></div><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h3 class="title"><a id="section-object-graph-validation"/>2.1.5. Object graphs</h3></div></div></div><p>The Bean Validation API does not only allow to validate single class instances but also complete object graphs (cascaded validation). To do so, just annotate a field or property representing a reference to another object with <code class="classname">@Valid</code> as demonstrated in <a class="xref" href="chapter-bean-constraints.html#example-cascaded-validation" title="例 2.5. Cascaded validation">例 2.5 “Cascaded validation”</a>.</p><div class="example"><a id="example-cascaded-validation"/><p class="title"><b>例 2.5. Cascaded validation</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">hibernate</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">validator</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">referenceguide</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">chapter02</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">objectgraph</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Car</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Valid</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;driver</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">hibernate</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">validator</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">referenceguide</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">chapter02</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">objectgraph</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Person</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">String</span><span class="java_plain">&nbsp;name</span><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/><p>If an instance of <code class="classname">Car</code> is validated, the referenced <code class="classname">Person</code> object will be validated as well, as the <span class="property">driver</span> field is annotated with <code class="classname">@Valid</code>. Therefore the validation of a <code class="classname">Car</code> will fail if the <span class="property">name</span> field of the referenced <code class="classname">Person</code> instance is <code class="code">null</code>.</p><p>The validation of object graphs is recursive, i.e. if a reference marked for cascaded validation points to an object which itself has properties annotated with <code class="classname">@Valid</code>, these references will be followed up by the validation engine as well. The validation engine will ensure that no infinite loops occur during cascaded validation, for example if two objects hold references to each other.</p><p>Note that <code class="literal">null</code> values are getting ignored during cascaded validation.</p><p>Object graph validation also works for collection-typed fields. That means any attributes that</p><div class="itemizedlist"><ul><li><p>are arrays</p></li><li><p>implement <code class="classname">java.lang.Iterable</code> (especially <code class="classname">Collection</code>, <code class="classname">List</code> and <code class="classname">Set</code>)</p></li><li><p>implement <code class="classname">java.util.Map</code></p></li></ul></div><p>can be annotated with <code class="classname">@Valid</code>, which will cause each contained element to be validated, when the parent object is validated.</p><div class="example"><a id="example-cascaded-validation-list"/><p class="title"><b>例 2.6. Cascaded validation of a collection</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_keyword">package</span><!-- <br/> --><span class="java_plain">&nbsp;org</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">hibernate</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">validator</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">referenceguide</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">chapter02</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">objectgraph</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">list</span><!-- <br/> --><span class="java_separator">;</span>
</span>
<!--  --><br/><span class="java_keyword">public</span><span class="java_plain">&nbsp;</span><span class="java_keyword">class</span><span class="java_plain">&nbsp;</span><span class="java_type">Car</span><span class="java_plain">&nbsp;</span><span class="java_separator">{</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">NotNull</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@</span><span class="java_type">Valid</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_keyword">private</span><span class="java_plain">&nbsp;</span><span class="java_type">List</span><span class="java_operator">&lt;</span><span class="java_type">Person</span><span class="java_operator">&gt;</span><span class="java_plain">&nbsp;passengers&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;</span><span class="java_keyword">new</span><span class="java_plain">&nbsp;</span><span class="java_type">ArrayList</span><span class="java_operator">&lt;</span><span class="java_type">Person</span><span class="java_operator">&gt;</span><span class="java_separator">();</span>
</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_operator">//</span><span class="java_separator">...</span>
<!--  --><br/><span class="java_separator">}</span></pre></div></div><br class="example-break"/><p>So when validating an instance of the <code class="classname">Car</code> class shown in <a class="xref" href="chapter-bean-constraints.html#example-cascaded-validation-list" title="例 2.6. Cascaded validation of a collection">例 2.6 “Cascaded validation of a collection”</a>, a <code class="classname">ConstraintViolation</code> will be created, if any of the <code class="classname">Person</code> objects contained in the <span class="property">passengers</span> list has a <code class="code">null</code> name.</p></div></div><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h2 class="title"><a id="section-validating-bean-constraints"/>2.2. Validating bean constraints</h2></div></div></div><p>The <code class="classname">Validator</code> interface is the most important object in Bean Validation. The next section shows how to obtain an <code class="classname">Validator</code> instance. Afterwards you'll learn how to use the different methods of the <code class="classname">Validator</code> interface.</p><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h3 class="title"><a id="section-obtaining-validator"/>2.2.1. Obtaining a <code class="classname">Validator</code> instance</h3></div></div></div><p>The first step towards validating an entity instance is to get hold of a <code class="classname">Validator</code> instance. The road to this instance leads via the <code class="classname">Validation</code> class and a <code class="classname">ValidatorFactory</code>. The easiest way is to use the static method <code class="methodname">Validation#buildDefaultValidatorFactory()</code>:</p><div class="example"><a id="d0e610"/><p class="title"><b>例 2.7. Validation#buildDefaultValidatorFactory()</b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">ValidatorFactory</span><!-- <br/> --><span class="java_plain">&nbsp;factory&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Validation</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">buildDefaultValidatorFactory</span><!-- <br/> --><span class="java_separator">();</span>
<!--  --><br/><span class="java_type">Validator</span><span class="java_plain">&nbsp;validator&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;factory</span><span class="java_separator">.</span><span class="java_plain">getValidator</span><span class="java_separator">();</span></pre></div></div><br class="example-break"/><p>This bootstraps a validator in the default configuration. Refer to <a class="xref" href="chapter-bootstrapping.html" title="第 8 章 Bootstrapping">第 8 章 <i>Bootstrapping</i></a> to learn more about the different bootstrapping methods and how to obtain a specifically configured <code class="classname">Validator</code> instance.</p></div><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h3 class="title"><a id="d0e622"/>2.2.2. Validator methods</h3></div></div></div><p>The <code class="classname">Validator</code> interface contains three methods that can be used to either validate entire entities or just single properties of the entity.</p><p>All three methods return a <code class="classname">Set&lt;ConstraintViolation&gt;</code>. The set is empty, if the validation succeeds. Otherwise a <code class="classname">ConstraintViolation</code> instance is added for each violated constraint.</p><p>All the validation methods have a var-args parameter which can be used to specify, which validation groups shall be considered when performing the validation. If the parameter is not specified the default validation group (<code class="classname">javax.validation.groups.Default</code>) is used. The topic of validation groups is discussed in detail in <a class="xref" href="chapter-groups.html" title="第 5 章 Grouping constraints">第 5 章 <i>Grouping constraints</i></a>.</p><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h4 class="title"><a id="d0e645"/>2.2.2.1. <code class="methodname">Validator#validate()</code></h4></div></div></div><p>Use the <code class="methodname">validate()</code> method to perform validation of all constraints of a given bean. <a class="xref" href="chapter-bean-constraints.html#example-validator-validate" title="例 2.8. Using Validator#validate()">例 2.8 “Using Validator#validate()”</a> shows the validation of an instance of the <code class="classname">Car</code> class from <a class="xref" href="chapter-bean-constraints.html#example-property-level" title="例 2.2. Property-level constraints">例 2.2 “Property-level constraints”</a> which fails to satisfy the <code class="classname">@NotNull</code> constraint on the <code class="varname">manufacturer</code> property. The validation call therefore returns one <code class="classname">ConstraintViolation</code> object.</p><div class="example"><a id="example-validator-validate"/><p class="title"><b>例 2.8. Using <code class="methodname">Validator#validate()</code></b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Car</span><!-- <br/> --><span class="java_plain">&nbsp;car&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Car</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">null</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">ConstraintViolation</span><span class="java_operator">&lt;</span><span class="java_type">Car</span><span class="java_operator">&gt;&gt;</span><span class="java_plain">&nbsp;constraintViolations&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;validator</span><span class="java_separator">.</span><span class="java_plain">validate</span><span class="java_separator">(</span><span class="java_plain">&nbsp;car&nbsp;</span><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">assertEquals</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">,</span><span class="java_plain">&nbsp;constraintViolations</span><span class="java_separator">.</span><span class="java_plain">size</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">assertEquals</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;may&nbsp;not&nbsp;be&nbsp;null&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;constraintViolations</span><span class="java_separator">.</span><span class="java_plain">iterator</span><span class="java_separator">().</span><span class="java_plain">next</span><span class="java_separator">().</span><span class="java_plain">getMessage</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span></pre></div></div><br class="example-break"/></div><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h4 class="title"><a id="d0e677"/>2.2.2.2. <code class="methodname">Validator#validateProperty()</code></h4></div></div></div><p>With help of the <code class="methodname">validateProperty()</code> you can validate a single named property of a given object. The property name is the JavaBeans property name.</p><div class="example"><a id="d0e686"/><p class="title"><b>例 2.9. Using <code class="methodname">Validator#validateProperty()</code></b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Car</span><!-- <br/> --><span class="java_plain">&nbsp;car&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_keyword">new</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_type">Car</span><!-- <br/> --><span class="java_separator">(</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">null</span><!-- <br/> --><span class="java_separator">,</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_literal">true</span><!-- <br/> --><span class="java_plain">&nbsp;</span><!-- <br/> --><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_type">Set</span><span class="java_operator">&lt;</span><span class="java_type">ConstraintViolation</span><span class="java_operator">&lt;</span><span class="java_type">Car</span><span class="java_operator">&gt;&gt;</span><span class="java_plain">&nbsp;constraintViolations&nbsp;</span><span class="java_operator">=</span><span class="java_plain">&nbsp;validator</span><span class="java_separator">.</span><span class="java_plain">validateProperty</span><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;car</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;manufacturer&quot;</span>
<!--  --><br/><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">assertEquals</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">,</span><span class="java_plain">&nbsp;constraintViolations</span><span class="java_separator">.</span><span class="java_plain">size</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">assertEquals</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;may&nbsp;not&nbsp;be&nbsp;null&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;constraintViolations</span><span class="java_separator">.</span><span class="java_plain">iterator</span><span class="java_separator">().</span><span class="java_plain">next</span><span class="java_separator">().</span><span class="java_plain">getMessage</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span></pre></div></div><br class="example-break"/></div><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h4 class="title"><a id="d0e693"/>2.2.2.3. <code class="methodname">Validator#validateValue()</code></h4></div></div></div><p>By using the <code class="methodname">validateValue() </code>method you can check whether a single property of a given class can be validated successfully, if the property had the specified value:</p><div class="example"><a id="d0e702"/><p class="title"><b>例 2.10. Using <code class="methodname">Validator#validateValue()</code></b></p><div class="example-contents"><pre xmlns="" xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="JAVA"><!-- <br/> --><span class="java_type">Set</span><!-- <br/> --><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_type">ConstraintViolation</span><!-- <br/> --><span class="java_operator">&lt;</span><!-- <br/> --><span class="java_type">Car</span><!-- <br/> --><span class="java_operator">&gt;&gt;</span><!-- <br/> --><span class="java_plain">&nbsp;constraintViolations&nbsp;</span><!-- <br/> --><span class="java_operator">=</span><!-- <br/> --><span class="java_plain">&nbsp;validator</span><!-- <br/> --><span class="java_separator">.</span><!-- <br/> --><span class="java_plain">validateValue</span><!-- <br/> --><span class="java_separator">(</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_type">Car</span><span class="java_separator">.</span><span class="java_keyword">class</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">&quot;manufacturer&quot;</span><span class="java_separator">,</span>
<!--  --><br/><span class="java_plain">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="java_literal">null</span>
<!--  --><br/><span class="java_separator">);</span>
</span>
<!--  --><br/><span class="java_plain">assertEquals</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">1</span><span class="java_separator">,</span><span class="java_plain">&nbsp;constraintViolations</span><span class="java_separator">.</span><span class="java_plain">size</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span>
<!--  --><br/><span class="java_plain">assertEquals</span><span class="java_separator">(</span><span class="java_plain">&nbsp;</span><span class="java_literal">&quot;may&nbsp;not&nbsp;be&nbsp;null&quot;</span><span class="java_separator">,</span><span class="java_plain">&nbsp;constraintViolations</span><span class="java_separator">.</span><span class="java_plain">iterator</span><span class="java_separator">().</span><span class="java_plain">next</span><span class="java_separator">().</span><span class="java_plain">getMessage</span><span class="java_separator">()</span><span class="java_plain">&nbsp;</span><span class="java_separator">);</span></pre></div></div><br class="example-break"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>注意</h2><p><code class="classname">@Valid</code> is not honored by <code class="methodname">validateProperty()</code> or <code class="methodname">validateValue()</code>.</p></div><p><code class="methodname">Validator#validateProperty()</code> is for example used in the integration of Bean Validation into JSF 2 (see <a class="xref" href="validator-integration.html#section-presentation-layer" title="10.2. JSF &amp; Seam">第 10.2 节 “JSF &amp; Seam”</a>) to perform a validation of the values entered into a form before they are propagated to the model.</p></div></div><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h3 class="title"><a id="section-constraint-violation-methods"/>2.2.3. <code class="classname">ConstraintViolation</code> methods</h3></div></div></div><p>Now it is time to have a closer look at what a <code class="classname">ConstraintViolation</code> is. Using the different methods of <code class="classname">ConstraintViolation</code> a lot of useful information about the cause of the validation failure can be determined. <a class="xref" href="chapter-bean-constraints.html#table-constraint-violation" title="表 2.1. The various ConstraintViolation methods">表 2.1 “The various ConstraintViolation methods”</a> gives an overview of these methods. The values in the "Example" column refer to <a class="xref" href="chapter-bean-constraints.html#example-validator-validate" title="例 2.8. Using Validator#validate()">例 2.8 “Using Validator#validate()”</a>.</p><div class="table"><a id="table-constraint-violation"/><p class="title"><b>表 2.1. The various <code class="classname">ConstraintViolation</code> methods</b></p><div class="table-contents"><table summary="The various ConstraintViolation methods" border="1"><colgroup><col/><col/><col/></colgroup><thead><tr><th>Method</th><th>Usage</th><th>Example</th></tr></thead><tbody><tr><td><code class="methodname">getMessage()</code></td><td>The interpolated error message</td><td>"may not be null"</td></tr><tr><td><code class="methodname">getMessageTemplate()</code></td><td>The non-interpolated error message</td><td>"{... NotNull.message}"</td></tr><tr><td><code class="methodname">getRootBean()</code></td><td>The root bean being validated</td><td><code class="varname">car</code></td></tr><tr><td><code class="methodname">getRootBeanClass()</code></td><td>The class of the root bean being validated</td><td><code class="classname">Car.class</code></td></tr><tr><td><code class="methodname">getLeafBean()</code></td><td>If a bean constraint, the bean instance the constraint is applied on; If a property constraint, the bean instance hosting the property the constraint is applied on</td><td><code class="varname">car</code></td></tr><tr><td><code class="methodname">getPropertyPath()</code></td><td>The property path to the validated value from root bean</td><td>contains one node with kind <code class="classname">PROPERTY</code> and name "manufacturer"</td></tr><tr><td><code class="methodname">getInvalidValue()</code></td><td>The value failing to pass the constraint</td><td><code class="literal">null</code></td></tr><tr><td><code class="methodname">getConstraintDescriptor()</code></td><td>Constraint metadata reported to fail</td><td>descriptor for <code class="classname">@NotNull</code></td></tr></tbody></table></div></div><br class="table-break"/></div></div><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h2 class="title"><a id="section-builtin-constraints"/>2.3. Built-in constraints</h2></div></div></div><p>Hibernate Validator comprises a basic set of commonly used constraints. These are foremost the constraints defined by the Bean Validation specification (see <a class="xref" href="chapter-bean-constraints.html#table-spec-constraints" title="表 2.2. Bean Validation constraints">表 2.2 “Bean Validation constraints”</a>). Additionally, Hibernate Validator provides useful custom constraints (see <a class="xref" href="chapter-bean-constraints.html#table-custom-constraints" title="表 2.3. Custom constraints">表 2.3 “Custom constraints”</a> and <a class="xref" href="chapter-bean-constraints.html#table-custom-country-constraints" title="表 2.4. Custom country specific constraints">表 2.4 “Custom country specific constraints”</a>).</p><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h3 class="title"><a id="validator-defineconstraints-spec"/>2.3.1. Bean Validation constraints</h3></div></div></div><p><a class="xref" href="chapter-bean-constraints.html#table-spec-constraints" title="表 2.2. Bean Validation constraints">表 2.2 “Bean Validation constraints”</a> shows purpose and supported data types of all constraints specified in the Bean Validation API. All these constraints apply to the field/property level, there are no class-level constraints defined in the Bean Validation specification. If you are using the Hibernate object-relational mapper, some of the constraints are taken into account when creating the DDL for your model (see column "Hibernate metadata impact").</p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>注意</h2><p>Hibernate Validator allows some constraints to be applied to more data types than required by the Bean Validation specification (e.g. <code class="classname">@Max</code> can be applied to <code class="classname">Strings</code>). Relying on this feature can impact portability of your application between Bean Validation providers.</p></div><div class="table"><a id="table-spec-constraints"/><p class="title"><b>表 2.2. Bean Validation constraints</b></p><div class="table-contents"><table summary="Bean Validation constraints" border="1"><colgroup><col align="left"/><col align="left"/><col align="left"/><col align="left"/></colgroup><thead><tr><th align="left">Annotation</th><th align="left">Supported data types</th><th align="left">Use</th><th align="left">Hibernate metadata impact</th></tr></thead><tbody valign="top"><tr><td align="left" valign="top"><code class="classname">@AssertFalse</code></td><td align="left" valign="top"><code class="classname">Boolean</code>, <code class="classname">boolean</code></td><td align="left" valign="top">Checks that the annotated element is <code class="constant">false</code></td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@AssertTrue</code></td><td align="left" valign="top"><code class="classname">Boolean</code>, <code class="classname">boolean</code></td><td align="left" valign="top">Checks that the annotated element is <code class="constant">true</code></td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@DecimalMax(value=,</code> <code class="classname">inclusive=)</code></td><td align="left" valign="top"><code class="classname">BigDecimal</code>, <code class="classname">BigInteger</code>, <code class="classname">CharSequence</code>, <code class="classname">byte</code>, <code class="classname">short</code>, <code class="classname">int</code>, <code class="classname">long</code> and the respective wrappers of the primitive types; Additionally supported by HV: any sub-type of <code class="classname">Number</code></td><td align="left" valign="top">Checks whether the annotated value is less than the specified maximum, when <em class="parameter"><code>inclusive=false</code></em>. Otherwise whether the value is less than or equal to the specified maximum. The parameter <em class="parameter"><code>value</code></em> is the string representation of the max value according to the <code class="classname">BigDecimal</code> string representation.</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@DecimalMin(value=,</code> <code class="classname">inclusive=)</code></td><td align="left" valign="top"><code class="classname">BigDecimal</code>, <code class="classname">BigInteger</code>, <code class="classname">CharSequence</code>, <code class="classname">byte</code>, <code class="classname">short</code>, <code class="classname">int</code>, <code class="classname">long</code> and the respective wrappers of the primitive types; Additionally supported by HV: any sub-type of <code class="classname">Number</code></td><td align="left" valign="top">Checks whether the annotated value is larger than the specified minimum, when <em class="parameter"><code>inclusive=false</code></em>. Otherwise whether the value is larger than or equal to the specified minimum. The parameter <em class="parameter"><code>value</code></em> is the string representation of the min value according to the <code class="classname">BigDecimal</code> string representation.</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@Digits(integer=,</code> <code class="classname">fraction=)</code></td><td align="left" valign="top"><code class="classname">BigDecimal</code>, <code class="classname">BigInteger</code>, <code class="classname">CharSequence</code>, <code class="classname">byte</code>, <code class="classname">short</code>, <code class="classname">int</code>, <code class="classname">long</code> and the respective wrappers of the primitive types; Additionally supported by HV: any sub-type of <code class="classname">Number</code></td><td align="left" valign="top">Checks whether the annoted value is a number having up to <code class="literal">integer</code> digits and <code class="literal">fraction</code> fractional digits</td><td align="left" valign="top">Defines column precision and scale</td></tr><tr><td align="left" valign="top"><code class="classname">@Future</code></td><td align="left" valign="top"><code class="classname">java.util.Date</code>, <code class="classname">java.util.Calendar</code>; Additionally supported by HV, if the <a class="ulink" href="http://joda-time.sourceforge.net/">Joda Time</a> date/time API is on the class path: any implementations of <code class="classname">ReadablePartial</code> and <code class="classname">ReadableInstant</code></td><td align="left" valign="top">Checks whether the annotated date is in the future</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@Max(value=)</code></td><td align="left" valign="top"><code class="classname">BigDecimal</code>, <code class="classname">BigInteger</code>, <code class="classname">byte</code>, <code class="classname">short</code>, <code class="classname">int</code>, <code class="classname">long</code> and the respective wrappers of the primitive types; Additionally supported by HV: any sub-type of <code class="classname">CharSequence</code> (the numeric value represented by the character sequence is evaluated), any sub-type of <code class="classname">Number</code></td><td align="left" valign="top">Checks whether the annotated value is less than or equal to the specified maximum</td><td align="left" valign="top">Adds a check constraint on the column</td></tr><tr><td align="left" valign="top"><code class="classname">@Min(value=)</code></td><td align="left" valign="top"><code class="classname">BigDecimal</code>, <code class="classname">BigInteger</code>, <code class="classname">byte</code>, <code class="classname">short</code>, <code class="classname">int</code>, <code class="classname">long</code> and the respective wrappers of the primitive types; Additionally supported by HV: any sub-type of <code class="classname">CharSequence</code> (the numeric value represented by the char sequence is evaluated), any sub-type of <code class="classname">Number</code></td><td align="left" valign="top">Checks whether the annotated value is higher than or equal to the specified minimum</td><td align="left" valign="top">Adds a check constraint on the column</td></tr><tr><td align="left" valign="top"><code class="classname">@NotNull</code></td><td align="left" valign="top">Any type</td><td align="left" valign="top">Checks that the annotated value is not <code class="constant">null.</code></td><td align="left" valign="top">Column(s) are not nullable</td></tr><tr><td align="left" valign="top"><code class="classname">@Null</code></td><td align="left" valign="top">Any type</td><td align="left" valign="top">Checks that the annotated value is <code class="constant">null</code></td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@Past</code></td><td align="left" valign="top"><code class="classname">java.util.Date</code>, <code class="classname">java.util.Calendar</code>; Additionally supported by HV, if the <a class="ulink" href="http://joda-time.sourceforge.net/">Joda Time</a> date/time API is on the class path: any implementations of <code class="classname">ReadablePartial</code> and <code class="classname">ReadableInstant</code></td><td align="left" valign="top">Checks whether the annotated date is in the past</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@Pattern(regex=,</code> <code class="classname">flag=)</code></td><td align="left" valign="top"><code class="classname">CharSequence</code></td><td align="left" valign="top">Checks if the annotated string matches the regular expression <em class="parameter"><code>regex</code></em> considering the given flag <em class="parameter"><code>match</code></em></td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@Size(min=, max=)</code></td><td align="left" valign="top"><code class="classname">CharSequence</code>, <code class="classname">Collection</code>, <code class="classname">Map</code> and <code class="classname">arrays</code></td><td align="left" valign="top">Checks if the annotated element's size is between min and max (inclusive)</td><td align="left" valign="top">Column length will be set to <em class="parameter"><code>max</code></em></td></tr><tr><td align="left" valign="top"><code class="classname">@Valid</code></td><td align="left" valign="top">Any non-primitive type</td><td align="left" valign="top">Performs validation recursively on the associated object. If the object is a collection or an array, the elements are validated recursively. If the object is a map, the value elements are validated recursively.</td><td align="left" valign="top">None</td></tr></tbody></table></div></div><br class="table-break"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>注意</h2><p>On top of the parameters indicated in <a class="xref" href="chapter-bean-constraints.html#table-spec-constraints" title="表 2.2. Bean Validation constraints">表 2.2 “Bean Validation constraints”</a> each constraint has the parameters <em class="parameter"><code>message</code></em>, <em class="parameter"><code>groups</code></em> and <em class="parameter"><code>payload</code></em>. This is a requirement of the Bean Validation specification.</p></div></div><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h3 class="title"><a id="validator-defineconstraints-hv-constraints"/>2.3.2. Additional constraints</h3></div></div></div><p>In addition to the constraints defined by the Bean Validation API Hibernate Validator provides several useful custom constraints which are listed in <a class="xref" href="chapter-bean-constraints.html#table-custom-constraints" title="表 2.3. Custom constraints">表 2.3 “Custom constraints”</a>. With one exception also these constraints apply to the field/property level, only <code class="classname">@ScriptAssert</code> is a class-level constraint.</p><div class="table"><a id="table-custom-constraints"/><p class="title"><b>表 2.3. Custom constraints</b></p><div class="table-contents"><table summary="Custom constraints" border="1"><colgroup><col align="left"/><col align="left"/><col align="left"/><col align="left"/></colgroup><thead><tr><th align="left">Annotation</th><th align="left">Supported data types</th><th align="left">Use</th><th align="left">Hibernate metadata impact</th></tr></thead><tbody valign="top"><tr><td align="left" valign="top"><code class="classname">@CreditCardNumber</code></td><td align="left" valign="top"><code class="classname">CharSequence</code></td><td align="left" valign="top">Checks that the annotated character sequence passes the Luhn checksum test. Note, this validation aims to check for user mistakes, not credit card validity! See also <a class="ulink" href="http://www.merriampark.com/anatomycc.htm">Anatomy of Credit Card Numbers</a>.</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@Email</code></td><td align="left" valign="top"><code class="classname">CharSequence</code></td><td align="left" valign="top">Checks whether the specified character sequence is a valid email address. The optional parameters <em class="parameter"><code>regexp</code></em> and <em class="parameter"><code>flags</code></em> allow to specify an additional regular expression (including regular expression flags) which the email must match.</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@Length(min=, max=)</code></td><td align="left" valign="top"><code class="classname">CharSequence</code></td><td align="left" valign="top">Validates that the annotated character sequence is between <em class="parameter"><code>min</code></em> and <em class="parameter"><code>max</code></em> included</td><td align="left" valign="top">Column length will be set to <em class="parameter"><code>max</code></em></td></tr><tr><td align="left" valign="top"><code class="classname">@ModCheck(modType=,</code> <code class="classname">multiplier=, startIndex=,</code> <code class="classname">endIndex=,</code> <code class="classname">checkDigitPosition=,</code> <code class="classname">ignoreNonDigitCharacters=)</code></td><td align="left" valign="top"><code class="classname">CharSequence</code></td><td align="left" valign="top">Checks that the digits within the annotated character sequence pass the mod 10 or mod 11 checksum algorithm. <code class="constant">modType</code> is used to select the modulo type and the <code class="constant">multiplier</code> determines the algorithm specific multiplier (see also <a class="ulink" href="http://en.wikipedia.org/wiki/Luhn_algorithm">Luhn algorithm</a>). <code class="constant">startIndex</code> and <code class="constant">endIndex</code> allow to only run the modulo algorithm on the specified sub-string. <code class="constant">checkDigitPosition</code> allows to use an arbitrary digit within the character sequence to be the check digit. If not specified it is assumed that the check digit is part of the specified range. Last but not least, <code class="constant">ignoreNonDigitCharacters</code> allows to ignore non digit characters.</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@NotBlank</code></td><td align="left" valign="top"><code class="classname">CharSequence</code></td><td align="left" valign="top">Checks that the annotated character sequence is not null and the trimmed length is greater than 0. The difference to @NotEmpty is that this constraint can only be applied on strings and that trailing whitespaces are ignored.</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@NotEmpty</code></td><td align="left" valign="top"><code class="classname">CharSequence</code>, <code class="classname">Collection</code>, <code class="classname">Map</code> and arrays</td><td align="left" valign="top">Checks whether the annotated element is not <code class="constant">null</code> nor empty</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@Range(min=, max=)</code></td><td align="left" valign="top"><code class="classname">BigDecimal</code>, <code class="classname">BigInteger</code>, <code class="classname">CharSequence</code>, <code class="classname">byte</code>, <code class="classname">short</code>, <code class="classname">int</code>, <code class="classname">long</code> and the respective wrappers of the primitive types</td><td align="left" valign="top">Checks whether the annotated value lies between (inclusive) the specified minimum and maximum</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@SafeHtml(whitelistType=,</code> <code class="classname">additionalTags=)</code></td><td align="left" valign="top"><code class="classname">CharSequence</code></td><td align="left" valign="top">Checks whether the annotated value contains potentially malicious fragments such as <code class="code">&lt;script/&gt;</code>. In order to use this constraint, the <a class="ulink" href="http://jsoup.org/">jsoup</a> library must be part of the class path. With the <em class="parameter"><code>whitelistType</code></em> attribute predefined whitelist types can be chosen. You can also specify additional html tags for the whitelist with the <em class="parameter"><code>additionalTags</code></em> attribute.</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@ScriptAssert(lang=,</code> <code class="classname">script=, alias=)</code></td><td align="left" valign="top">Any type</td><td align="left" valign="top">Checks whether the given script can successfully be evaluated against the annotated element. In order to use this constraint, an implementation of the Java Scripting API as defined by JSR 223 ("Scripting for the Java<sup>TM</sup> Platform") must part of the class path. The expressions to be evaluated can be written in any scripting or expression language, for which a JSR 223 compatible engine can be found in the class path.</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@URL(protocol=,</code> <code class="classname">host=, port=</code> <code class="classname">regexp=, flags=)</code></td><td align="left" valign="top"><code class="classname">CharSequence</code></td><td align="left" valign="top">Checks if the annotated character sequence is a valid URL according to RFC2396. If any of the optional parameters <em class="parameter"><code>protocol</code></em>, <em class="parameter"><code>host</code></em> or <em class="parameter"><code>port</code></em> are specified, the corresponding URL fragments must match the specified values. The optional parameters <em class="parameter"><code>regexp</code></em> and <em class="parameter"><code>flags</code></em> allow to specify an additional regular expression (including regular expression flags) which the URL must match.</td><td align="left" valign="top">None</td></tr></tbody></table></div></div><br class="table-break"/><div class="section" lang="zh-CN"><div class="titlepage"><div><div><h4 class="title"><a id="d0e1496"/>2.3.2.1. Country specific constraints</h4></div></div></div><p>Hibernate Validator offers also some country specific constraints, e.g. for the validation of social security numbers. </p><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="note"><h2>注意</h2><p>If you have to implement a country specific constraint, consider making it a contribution to Hibernate Validator!</p></div><div class="table"><a id="table-custom-country-constraints"/><p class="title"><b>表 2.4. Custom country specific constraints</b></p><div class="table-contents"><table summary="Custom country specific constraints" border="1"><colgroup><col align="left"/><col align="left"/><col align="left"/><col align="left"/><col align="left"/></colgroup><thead><tr><th align="left">Annotation</th><th align="left">Supported data types</th><th align="left">Use</th><th align="left">Country</th><th align="left">Hibernate metadata impact</th></tr></thead><tbody valign="top"><tr><td align="left" valign="top"><code class="classname">@CNPJ</code></td><td align="left" valign="top"><code class="classname">CharSequence</code></td><td align="left" valign="top">Checks that the annotated character sequence represents a Brazilian corporate tax payer registry number (Cadastro de Pessoa Juríeddica)</td><td align="left" valign="top">Brazil</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@CPF</code></td><td align="left" valign="top"><code class="classname">CharSequence</code></td><td align="left" valign="top">Checks that the annotated character sequence represents a Brazilian individual taxpayer registry number (Cadastro de Pessoa Fídsica)</td><td align="left" valign="top">Brazil</td><td align="left" valign="top">None</td></tr><tr><td align="left" valign="top"><code class="classname">@TituloEleitoral</code></td><td align="left" valign="top"><code class="classname">CharSequence</code></td><td align="left" valign="top">Checks that the annotated character sequence represents a Brazilian voter ID card number (<a class="ulink" href="http://ghiorzi.org/cgcancpf.htm">Título Eleitoral</a>)</td><td align="left" valign="top">Brazil</td><td align="left" valign="top">None</td></tr></tbody></table></div></div><br class="table-break"/><div xmlns:rf="java:org.jboss.highlight.XhtmlRendererFactory" class="tip"><h2>提示</h2><p>In some cases neither the Bean Validation constraints nor the custom constraints provided by Hibernate Validator will fulfill your requirements. In this case you can easily write your own constraint. You can find more information in <a class="xref" href="validator-customconstraints.html" title="第 6 章 Creating custom constraints">第 6 章 <i>Creating custom constraints</i></a>.</p></div></div></div></div></div><HR xmlns=""/><a xmlns="" href=""><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">版权 © 2009 - 2013 Red Hat, Inc. &amp; Gunnar Morling</p></a><ul class="docnav"><li class="previous"><a accesskey="p" href="validator-gettingstarted.html"><strong>上一页</strong>第 1 章 Getting started</a></li><li class="up"><a accesskey="u" href="#"><strong>上一级</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>起始页</strong></a></li><li class="next"><a accesskey="n" href="chapter-method-constraints.html"><strong>下一页</strong>第 3 章 Declaring and validating method constraints</a></li></ul></body></html>